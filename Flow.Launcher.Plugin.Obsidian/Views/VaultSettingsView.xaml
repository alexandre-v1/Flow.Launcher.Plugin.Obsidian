<UserControl
    x:Class="Flow.Launcher.Plugin.Obsidian.Views.VaultSettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.modernwpf.com/2019"
    xmlns:vm="clr-namespace:Flow.Launcher.Plugin.Obsidian.ViewModels"
    xmlns:views="clr-namespace:Flow.Launcher.Plugin.Obsidian.Views"
    x:Name="VaultSettingsControl"
    d:DataContext="{d:DesignInstance vm:VaultSettingsViewModel}"
    d:DesignHeight="900"
    d:DesignWidth="600"
    Background="{DynamicResource Color01B}"
    mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Style.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="73" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBlock
            Grid.Row="0"
            MaxWidth="1000"
            Margin="25,23,0,0"
            FontSize="30"
            Style="{StaticResource PageTitle}"
            Text="{Binding Name}"
            TextAlignment="Left" />

        <ScrollViewer
            Grid.Row="1"
            Margin="0"
            CanContentScroll="False"
            FontSize="14"
            VirtualizingPanel.ScrollUnit="Pixel"
            VirtualizingStackPanel.IsVirtualizing="True">

            <StackPanel Margin="25,0,25,40" Orientation="Vertical" MaxWidth="1000">

                <!-- Information -->
                <Border
                    Margin="0"
                    Padding="0"
                    Style="{StaticResource SettingGroupBox}">
                    <Expander
                        Padding="0"
                        BorderThickness="0"
                        ClipToBounds="True"
                        IsExpanded="True"
                        SnapsToDevicePixels="True"
                        Style="{DynamicResource ExpanderStyle1}">
                        <Expander.Header>
                            <!--  Negative left margin to nullify expander  -->
                            <Border Margin="-18,0,0,0" Padding="0,20">
                                <StackPanel Orientation="Horizontal">
                                    <ui:FontIcon
                                        Margin="20,0,0,0"
                                        VerticalAlignment="Center"
                                        FontFamily="Segoe Fluent Icons"
                                        FontSize="20"
                                        Foreground="{DynamicResource Color05B}"
                                        Glyph="&#xe946;" />
                                    <TextBlock
                                        Margin="20,0,0,0"
                                        VerticalAlignment="Center"
                                        FontSize="20"
                                        Foreground="{DynamicResource Color05B}"
                                        Text="Information" />
                                </StackPanel>
                            </Border>
                        </Expander.Header>

                        <Border
                            Background="Transparent"
                            BorderBrush="{DynamicResource Color03B}"
                            BorderThickness="0,1,0,0">

                            <StackPanel Margin="60,0,45,0" Orientation="Vertical">
                                <StackPanel
                                    Orientation="{Binding AutoHorizontalOrientation, ElementName=VaultSettingsControl}">
                                    <TextBlock
                                        Width="80"
                                        Margin="0,7"
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource SettingTitleLabel}"
                                        Text="Name" />
                                    <TextBlock
                                        Margin="0,7"
                                        Style="{StaticResource SettingSubTitleLabel}"
                                        Text="{Binding Name}" />
                                </StackPanel>

                                <StackPanel
                                    Orientation="{Binding AutoHorizontalOrientation, ElementName=VaultSettingsControl}">
                                    <TextBlock
                                        Width="80"
                                        Margin="0,7"
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource SettingTitleLabel}"
                                        Text="Path" />
                                    <TextBlock
                                        Margin="0,7"
                                        Style="{StaticResource SettingSubTitleLabel}"
                                        Text="{Binding Path}" />
                                </StackPanel>

                                <StackPanel
                                    Orientation="{Binding AutoHorizontalOrientation, ElementName=VaultSettingsControl}">
                                    <TextBlock
                                        Width="80"
                                        Margin="0,7"
                                        HorizontalAlignment="Left"
                                        Style="{StaticResource SettingTitleLabel}"
                                        Text="ID" />
                                    <TextBlock
                                        Margin="0,7"
                                        Style="{StaticResource SettingSubTitleLabel}"
                                        Text="{Binding Id}" />
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </Expander>
                </Border>

                <!-- Files count -->
                <Border Padding="0,20" Style="{StaticResource SettingGroupBox}">
                    <Grid>
                        <StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
                            <ui:FontIcon
                                Margin="20,0,0,0"
                                VerticalAlignment="Center"
                                FontFamily="Segoe Fluent Icons"
                                FontSize="20"
                                Foreground="{DynamicResource Color05B}"
                                Glyph="&#xE8A5;" />
                            <TextBlock
                                Margin="20,0,0,0"
                                VerticalAlignment="Center"
                                FontSize="20"
                                Foreground="{DynamicResource Color05B}"
                                Text="{Binding FilesCount}" />
                        </StackPanel>

                        <Button
                            Margin="20,0,20,0"
                            HorizontalAlignment="Right"
                            Command="{Binding ReloadVaultCommand}"
                            Content="Reload" />
                    </Grid>
                </Border>

                <TextBlock
                    Margin="0,40,0,0"
                    FontWeight="Bold"
                    Style="{StaticResource PageTitle}"
                    Text="Files"
                    TextAlignment="Left" />

                <!-- Files extension -->
                <views:FileExtensionsList DataContext="{Binding FileExtensionListViewModel}" />

                <!-- Exclude paths -->
                <views:ExcludePathsView DataContext="{Binding ExcludePathsViewModel}" />

            </StackPanel>

        </ScrollViewer>
    </Grid>
</UserControl>
